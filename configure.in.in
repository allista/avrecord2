#MIN_CONFIG(3.2.0)

AM_INIT_AUTOMAKE(avrecord, 1.1.1)
AC_C_BIGENDIAN
AC_CHECK_KDEMAXPATHLEN

dnl Checks for libraries.
AC_CHECK_LIB(asound,
       snd_pcm_open,
       LIBS="$LIBS -lasound",
       AC_MSG_ERROR([*** ALSA sound library not found!])
)

AC_CHECK_LIB(avcodec,
       avcodec_init,
       LIBS="$LIBS -lavcodec",
       AC_MSG_ERROR([*** avcodec form FFmpeg library not found!])
)
AC_CHECK_LIB(avformat,
       av_free,
       LIBS="$LIBS -lavformat",
       AC_MSG_ERROR([*** avformat from FFmpeg library not found!])
)

PKG_CHECK_MODULES([LIBCONFIGXX], [libconfig++ >= 1.3],,
       AC_MSG_ERROR([libconfig++ 1.3 or newer not found.])
)
LIBS="$LIBS $LIBCONFIGXX_LIBS"
CFLAGS="$CFLAGS $LIBCONFIGXX_CFLAGS"

AC_SUBST(LIBS)
